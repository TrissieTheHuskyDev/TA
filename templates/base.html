{% load static %}
<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="{% static '/css/main.css' %}">

    {% if title %}
    <title>Project TA - {{ title }}</title>
    {% else %}
    <title>Project TA</title>
    {% endif %}
</head>
<body>
<header class="site-header">
    <nav class="navbar navbar-expand-md navbar-dark bg-steel fixed-top">
        <div class="container">
            <a class="navbar-brand mr-4" href="/">Project TA</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle"
                    aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarToggle">
                <div class="navbar-nav mr-auto">
                    {% if user.is_authenticated %}
                    {% if template_test.left_navbar.subscribed %}
                        <a class="nav-item nav-link" href="{% url 'home' %}">Subscribed</a>
                    {% endif %}
                    {% if template_test.left_navbar.progress %}
                        <a class="nav-item nav-link" href="{% url 'progress-taken' %}">Progress</a>
                    {% endif %}
                    <a class="nav-item nav-link" href="{% url 'dashboard' %}">Dashboard</a>
                    {% endif %}
                    <a class="nav-item nav-link" href="{% url 'about' %}">About</a>
                </div>
                <!-- Navbar Right Side -->
                <div class="navbar-nav">
                    {% if user.is_authenticated %}
                    {% if template_test.report.create_a_report or template_test.report.all_reports or template_test.report.subscribed_reports %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Report
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                            {% if template_test.report.create_a_report %}
                                <a class="dropdown-item" href="{% url 'report-create' %}">Create A Report</a>
                            {% endif %}
                            {% if template_test.report.all_reports %}
                                <a class="dropdown-item" href="{% url 'all-reports' %}">All Reports</a>
                            {% endif %}
                            {% if template_test.report.subscribed_reports %}
                                <a class="dropdown-item" href="{% url 'home' %}">Subscribed Reports</a>
                            {% endif %}
                        </div>
                    </li>
                    {% endif %}
                    {% if template_test.tag.create_a_tag or template_test.tag.all_tags %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown2" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Tag
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown2">
                            {% if template_test.tag.create_a_tag %}
                                <a class="dropdown-item" href="{% url 'tag-create' %}">Create A Tag</a>
                            {% endif %}
                            {% if template_test.tag.all_tags %}
                                <a class="dropdown-item" href="{% url 'tag-list' %}">All Tags</a>
                            {% endif %}
                        </div>
                    </li>
                    {% endif %}
                    {% if template_test.progress.progress_taken or template_test.progress.progress_subscribed %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown3" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Progress
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown3">
                            {% if template_test.progress.progress_taken %}
                            <a class="dropdown-item" href="{% url 'progress-taken' %}">Progress Taken</a>
                            {% endif %}
                            {% if template_test.progress.progress_subscribed %}
                            <a class="dropdown-item" href="{% url 'progress-subscribed' %}">Progress Subscribed</a>
                            {% endif %}
                        </div>
                    </li>
                    {% endif %}
                    {% if template_test.organization.create_a_unit or template_test.organization.manage_authorization or template_test.organization.all_point_logs %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown4" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Organization
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown4">
                            {% if template_test.organization.create_a_unit %}
                                <a class="dropdown-item" href="{% url 'unit-create' %}">Create A Unit</a>
                            {% endif %}
                            {% if template_test.organization.unit_hierarchy %}
                                <a class="dropdown-item" href="{% url 'unit-list' %}">Unit Hierarchy</a>
                            {% endif %}
                            {% if template_test.organization.all_users %}
                                <a class="dropdown-item" href="{% url 'user-list' %}">All Users</a>
                            {% endif %}
                            {% if template_test.organization.create_a_unit and template_test.organization.manage_authorization %}
                                <div class="dropdown-divider"></div>
                            {% endif %}
                            {% if template_test.organization.manage_authorization %}
                                <a class="dropdown-item" href="{% url 'auth-detail' %}">Manage Authorization</a>
                            {% endif %}
                            {% if template_test.organization.create_a_unit and template_test.organization.all_point_logs or template_test.organization.manage_authorization and template_test.organization.all_point_logs %}
                                <div class="dropdown-divider"></div>
                            {% endif %}
                            {% if template_test.organization.create_a_point_log %}
                                <a class="dropdown-item" href="{% url 'point-create' %}">Create A Point Log</a>
                            {% endif %}
                            {% if template_test.organization.all_point_logs %}
                                <a class="dropdown-item" href="{% url 'point-list' %}">All Point Logs</a>
                            {% endif %}
                        </div>
                    </li>
                    {% endif %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown5" role="button"
                           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Personal
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown5">
                            <a class="dropdown-item" href="{% url 'user-reports' user.username%}">My Page</a>
                            <a class="dropdown-item" href="{% url 'profile' %}">Profile Settings</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
                        </div>
                    </li>
                    {% else %}
                    <a class="nav-item nav-link" href="{% url 'login' %}">Login</a>
                    <a class="nav-item nav-link" href="{% url 'register' %}">Register</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>
</header>

<main role="main" class="container">
    {% if user.is_authenticated %}
    <div class="row">
        <div class="col-md-8">
    {% else %}
    <div class="text-center" style="width:500px; margin:auto;">
    {% endif %}
            {% if messages %}
            {% for message in messages %}
            {%if message.tags == 'error' %}
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {% else %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {% endif %}
                {{message}}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
            </div>
            {% endfor %}
            {% endif %}

            {% block content %}{% endblock %}
        </div>
    {% if user.is_authenticated %}
        <div class="col-md-4">
            <div class="content-section">
                <small class='text-muted'>(Put Announcement/Event/Temporary Informations Here!)</small>
                <h3 class="mb-2 text-center"><strong>TOWNHALL MEETING</strong> (Aug 8 2020)</h3>
                <img class="img-fluid mx-auto d-block mt-2" src="/image/side_bar/2d5ec92cca0e30fada8e33e119c434a5.jpg">
                <p class="mt-2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed sem mi, pellentesque eget diam non, gravida pretium leo. In pretium suscipit leo, eu hendrerit augue ullamcorper ac. Praesent ex nisi, viverra a est et, varius ultricies turpis. Ut vel nunc est.</p>
            </div>
            <div class="content-section">
                <small class='text-muted'>(Put Announcement/Event/Temporary Informations Here!)</small>
                <h3 class="mb-2 text-center"><strong>INTERNAL BADMINTON SPARRING</strong> (Aug 17 2020)</h3>
                <img class="img-fluid mx-auto d-block mt-2" src="/image/side_bar/CLP-badminton-poster_905.png">
                <p class="mt-2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed sem mi, pellentesque eget diam non, gravida pretium leo. In pretium suscipit leo, eu hendrerit augue ullamcorper ac. Praesent ex nisi, viverra a est et, varius ultricies turpis. Ut vel nunc est.</p>
            </div>
        </div>
    </div>
    {% endif %}
</main>
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>

{% block jquery %}{% endblock %}

</body>
</html>